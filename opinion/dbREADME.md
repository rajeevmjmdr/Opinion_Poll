# Oracle Database 11g Express Edition Release 11.2.0.2.0

# Create table AUTHOR
CREATE TABLE AUTHOR("AUTHOR_ID" VARCHAR2(10) NOT NULL PRIMARY KEY,"AUTHOR_NAME" VARCHAR2(30),"AUTHOR_VOTES" NUMBER(10,0));

# Insert 4 value into Author table 
INSERT INTO AUTHOR(AUTHOR_ID,AUTHOR_NAME,AUTHOR_VOTES) VALUES ('I1','Miguel de Cervantes',0);

INSERT INTO AUTHOR(AUTHOR_ID,AUTHOR_NAME,AUTHOR_VOTES) VALUES ('I2','Charles Dickens',0);

INSERT INTO AUTHOR(AUTHOR_ID,AUTHOR_NAME,AUTHOR_VOTES) VALUES ('I3','J.R.R. Tolkien',0);

INSERT INTO AUTHOR(AUTHOR_ID,AUTHOR_NAME,AUTHOR_VOTES) VALUES ('I4','Antoine de Saint-Exuper',0);

# Create table OPINION_POLL
CREATE TABLE OPINION_POLL("POLL_ID" NUMBER(10,0) NOT NULL PRIMARY KEY ,"AUTHOR_ID" VARCHAR2(10) ,FOREIGN KEY(AUTHOR_ID) REFERENCES AUTHOR(AUTHOR_ID),"POLL" NUMBER(1,0));

# Create sequence OPINION_POLL_SEQ
CREATE SEQUENCE OPINION_POLL_SEQ;

# Create trigger OPINION_ON_INSERT

CREATE OR REPLACE TRIGGER OPINION_ON_INSERT
  BEFORE INSERT ON OPINION_POLL
  FOR EACH ROW
  BEGIN
  SELECT OPINION_POLL_SEQ.NEXTVAL
  INTO :NEW.POLL_ID
  FROM DUAL;
  END;
    /